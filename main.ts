let currentPlayer = 1
let gameActive = true

let player1: Sprite = null
let player2: Sprite = null

function createPlayers() {
    player1 = sprites.create(img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . 3 3 3 3 3 b 3 . . . . .
        . . . 3 b 3 3 3 3 3 3 3 . . . .
        . . 3 3 1 1 1 3 1 1 1 3 3 . . .
        . . 3 3 1 f 1 3 1 f 1 3 3 . . .
        . . b 3 1 1 1 3 1 1 1 3 3 . . .
        . . 3 3 3 3 3 3 3 3 3 3 3 . . .
        . . 3 3 3 3 3 3 3 3 3 b 3 . . .
        . . 3 b 3 1 1 1 1 1 3 3 3 . . .
        . . 3 3 3 1 2 2 1 1 3 3 3 . . .
        . . . 3 3 3 3 3 3 3 b 3 . . . .
        . . . . 3 b 3 3 3 3 3 . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `, SpriteKind.Player)
    player1.setPosition(40, 60)

    player2 = sprites.create(img`
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . f 1 1 f . . . . . .
        . . . . . f 1 1 1 1 f . . . . .
        . . . . . 1 1 1 1 1 1 . . . . .
        . . . . f 1 f 1 1 f 1 f . . . .
        . . . . f 1 1 1 1 1 1 f . . . .
        . . . . f f 1 f f 1 f f . . . .
        . . . . f . f 1 1 f . f . . . .
        . . . . f . f . . f . f . . . .
        . . . . f . f . . f . f . . . .
        . . . . . . f . . f . . . . . .
        . . . . . . f . . f . . . . . .
        . . . . . . f . . f . . . . . .
        . . . . . . f . . f . . . . . .
        . . . . . . f . . f . . . . . .
    `, SpriteKind.Player)
    player2.setPosition(120, 60)
}

function onPlayerClick(player: number) {
    if (!gameActive) {
        return
    }
    if (player == currentPlayer) {
        gameOver(currentPlayer)
    } else {
        currentPlayer = player
    }
}
scene.setBackgroundImage(img`
    9dd11111111111dd9999999999999999999999999999999999999999999999999999999999999999999999999999dd111111111111119999999999999999999999999999999999999999999999999999
    d111111111111111d99999999999999999999999999999999999999999999999999999999999999999999999999d111dd111111111111199999999999999999999999999999999999999999999999999
    11111111111111111d999999999999ddddddddddd9999999999999999999999999999999999999999999999999d111d11111111111111119111111111119999999999999999999999999999999999999
    111111111111111111d9999999999d111111111111111111111199999999999999999999999999999999999991111d11111111111111111111111111111dd99999999999999999999999999999999999
    111ddddddd111111111d99999991111111111111d11111111111d999999999999999999999999999991111111111d1111111111111111111d111111111111dd999999999999999999999999999999999
    11d1111111d111111111191111111111111111dd1111d11111111dd9999999999999999999999999dd111111111dd11111111111111d111d1d1111111111111199999999999999999999999999999999
    111111111111111111111111111111111dd11d1111111d111111111d99999999999999999999999d1111111111d11d111111111111d1111d11d1111111111111d9999999999999999999999999999999
    11111111111111111111111111111111111dd11111111d1111111111d999999999999999999999d11111111111d111d1111111111d11111111d11111111111111d999999999999999999999999999999
    111111111111111111111111111111111111d111111111d111111111d99999999999999999999d11111111111111111d11111111d1111111111111111111111111d99999999999999999999999999999
    1111111111111111111111111111dd11111d1d1111111111111111111d999999999999999999d1111111111111111111d1111111d1111111111111111111111111d99999999999999999999999999999
    111111111111111111111111111111d1111111d1111111111111111111199999999999999999d1111111111111111111d111111d111111111111111111111111111d9999999999999999999999999999
    1111111111111111111111111111111d1111111d111111111111111111199999999999999991111111111111111111111111111d111111111111111111111111111d9999999999999999999999999999
    11111111111111111111111111111111d111111d111111111111111111199999999999999991111111111111111111111111111111111111111111111111111111111999999999999999999999999999
    1111111111d11111111111111111111111111111111111111111111111199999999999999991111111111111111111111111111111111111111111111111111111111999999999999999999999999999
    111ddddddd111111111111111111111111111111111111111111111111199999999999999991111111111111111111dd111111111dd11111111111111111111111111999999999999999999999999999
    111111111111111111111111111111111111111111111111111111111119999999999999999111111111111111111d1111111111111d1111111111111111111111111999999999999999999999999999
    11111111111111111111111111111111111111111111111111111111111999999999999999911111111111111111d111111111111111d111111111111111111111111999999999999999999999999999
    1111111111111111111111111111111111111111111111111111111111199999999999999991111111111111111d11111111111111111d11111111111111111111111999999999999999999999999999
    11111111111111111111d111111111111111111111111111111111111119999999999999999111111111111d111d11111111111111111d11111111111111111111111999999999999999999999999999
    11111111111111111111d111111111111111111111111111111111111119999999999999999111111111111d11111111111111111111111111d111111111111111111999999999999999999999999999
    1111111111111111111d11111111111111111111111111d11111111111199999999999999999d11111111111d1111111d11111111111111111d111111111111111111999999999999999999999999999
    111111111111111111d11111111111111111111111111d11111111111d999999999999999999d1111111111111111111d1111111111111111d1111111111111111111999999999999999999999999999
    11111111111111111d111111111111111111d11111111d1111111111d99999999999999999999d11111111111111111d111111111111d111d11111111111111111111999999999999999999999999999
    d111111111111111d111111111d111111111d1111111d11111111111d999999999999999999999d1111111111111111111111111111d11111111111111111111111d9999999999999999999999999999
    9dd111111111111111111111111dd11111111d1111dd11111111111d99999999999999999999999d1111111111111111111111111dd111111111111111111111111d9999999999999999999999999999
    99911111111111111111111111111d11111111111d11111111111dd9999999999999999999999999dd111111111111111111111111111111111111111111111111d99999999999999999999999999999
    9999999999999911d11111111111111111111111111111111111d99999999999999999999999999999111111111111111111111111111111111111111111111111d99999999999999999999999999999
    999999999999999d1d111111111111111111119991111111111199999999999999999999999999999999999999111111111111111111111111111111111111111d999999999999999999999999999999
    9999999999999999d1111111111111d11111d999999999999999999999999999999999999999999999999999999d11111111111111d111111111111111111111d9999999999999999999999999999999
    9999999999999999911111111111dd11111d9999999999999999999999999999999999999999999999999999999d111111111111111d1111111111111111111d99999999999999999999999999999999
    999999999999999999911111111111111dd999999999999999999999999999999999999999999999999999999999d11111111111111111111111111111111dd999999999999999999999999999999999
    999999999999999999999911111111111999999999999999999999999999999999999999999999999999999999999d1111111111111d99dd11111111111dd99999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dd111111111dd99999111111111119999999999999999999999999999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddddd9999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999777777777779999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999997777777777777999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999997777777777777777777777779999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999777777777777777777777777777999977777777799999999999999999999999999999999999999999999999999999
    9977777777777999977777777777999997777777779999999999999999999999997777777777777777777777777777799777777777779999999997777777777799999999999999999999999999999999
    7777777777777779777777777777799777777777777799999999999977777777777777777777777777777777777777777777777777777999999777777777777777999999999999999999999999999999
    7777777777777777777777777777777777777777777777777777797777777777777777777777777777777777777777777777777777777799997777777777777777799999999999999999999999999999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777779977777777777777777777777777777999999999999999999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777779777777777777777777777777777777799999999999999999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777999999999999999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777799999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777999
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777799
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777779
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777779
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777e77777777777eeeeeeeeeee77777777777777777777777777777777777777777eeeeeeeee7777777777777eeeeeeeeeeee77777777777777777777777777777777777777777eeeee
    777777777777777eeeeeeeeeeeeeeeeeeeeeeeeee77777777777777777777777777777777eeeeeeeeeeeeeeeee77777777777eeeeeeeeeeeeee777777777777777777777777777777eeeeeeeeeeeeeee
    ee77777777777eeeeeeeeeeeeeeeeeeeeeeeeeeeee777777777777777777777777777777eeeeeeeeeeeeeeeeeee777777777eeeeeeeeeeeeeeeee77777777777ee7777777777777eeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee7777777777777777777eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee77777777777eeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee777777777777777eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee77777777777eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
`)
function gameOver(winner: number) {
    gameActive = false
    game.showLongText("Game Over! Player " + winner + " wins!", DialogLayout.Bottom)
}

controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    onPlayerClick(1)
})

controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
controller.moveSprite(null)
})
controller.moveSprite(null)